<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hate</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.33.1/sweetalert2.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.33.1/sweetalert2.js"></script>
</head>
<body>
<!--   VERY insecure but it's more of for testing use   -->
    <br></br>
    <!-- Start -->
    <div class="container">
        <!-- <caption>Made this cause someone jealous (*ahem* Ian) changed the list #jealous</caption> -->
        <form class="card p-3 bg-light" id="bob">
            <h4>I hate whoever has access cause I was probably THREATENED to give access to them</h4>
            <div class="form-group">
                <div class="row">
                    <label for="selectperson">Pick a person</label>
                    <select class="form-control" id="selectperson">
                        <option value="poop">Select the person</option>
                        <script>
                            async function ye() {
                                var aa = "https://keepthescore.co/api/yjxrblmwdae/board/";
                                var obj = await (await fetch(aa)).json();
                                var users = obj.players
                                for (var item in users) {
                                    if (users[item].player_name) {
                                        foundscore = parseInt(item) + 1;

                                        var list = document.querySelector("#selectperson");
                                        list.innerHTML = list.innerHTML + ('<select class="form-control" id="who"><option value=' + users[item].id + '>' + users[item].player_name + '</option></select>');
                                    };
                                };
                            };
                            ye();
                        </script>
                    </select>
                </div>

                <div class="row">
                    <!-- Num -->
                    <label for="replyNumber">Number (negative numbers work!)</label>
                    <input type="number" class="form-control" id="replyNumber" min="-10000000000000" data-bind="value:replyNumber" />
                    <small id="passwordHelpBlock" class="form-text text-muted">
                        Rawr I'll know...
                    </small>
                </div>

                <div class="row">
                    <button type="submit" class="btn btn-primary" id="idk">Submit</button>
                </div>
            </div>
            <script>
                $('#bob').on('submit', function () {
                    if (!(document.querySelector("#selectperson").value == "poop")) {
                        //don't know how to do short circuit evaluations yet
                        var shortcir = document.querySelector("#replyNumber")
                        if ((shortcir.value == "")) {
                            shortcir = 0
                        }

                        //first request start
                        var myHeaders = new Headers();
                        myHeaders.append("Content-Type", "application/json");

                        var raw = JSON.stringify({"player_id":parseFloat(document.querySelector("#selectperson").value),"score":shortcir.value});

                        var requestOptions = {
                        method: 'POST',
                        headers: myHeaders,
                        body: raw,
                        redirect: 'follow'
                        };

                        fetch("https://keepthescore.co/api/yjxrblmwdae/score/?=&=", requestOptions)
                        .then(response => response.text())
                        .then(result => console.log(result))
                        .catch(error => console.log('error', error));
                        //first request end
                        Swal.fire({
                            title: 'Sweet!',
                            text: 'You just HACKED THE MAINFRAME IM TELLING MR.TURNER.',
                            imageUrl: 'https://ih1.redbubble.net/image.976938734.2515/st,small,507x507-pad,600x600,f8f8f8.jpg',
                            imageWidth: 400,
                            imageHeight: 200,
                            imageAlt: 'Custom image',
                        })
                    } else {
                        Swal.fire({
                            title: 'NO!',
                            text: 'NO NO NO SELECT A PERSON OR CORRECT NUMBER.',
                            imageUrl: 'https://ih1.redbubble.net/image.976938734.2515/st,small,507x507-pad,600x600,f8f8f8.jpg',
                            imageWidth: 400,
                            imageHeight: 200,
                            imageAlt: 'Custom image',
                        })
                    }

                    return false;
                });
            </script>
        </form>
    </div>
    <!-- End -->
    <br></br>
</body>
</html>
